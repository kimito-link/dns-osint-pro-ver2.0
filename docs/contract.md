# 命令の「4点セット」テンプレート

このテンプレートは、AIに命令を渡す際や、新しい機能を実装する前に使用します。
曖昧さを排除し、Done条件を明確化することで、「5歩進んだら7歩下がる」問題を防ぎます。

---

## Contract: [機能名]

### 1. 目的（Why）

<!-- なぜこの機能を実装するのか？ -->
<!-- 例: ユーザーがより簡単にDNS情報を確認できるようにするため -->


### 2. やること（What）

<!-- 何を実装するのか？具体的なタスクをリスト化 -->
- [ ] タスク1
- [ ] タスク2
- [ ] タスク3


### 3. やってはいけないこと（NG）

<!-- 絶対に変更してはいけないファイル、機能 -->
- [ ] manifest.jsonの権限（permissions/host_permissions）を変更しない
- [ ] background.jsの既存のメッセージハンドリングを壊さない
- [ ] 既存の機能を壊さない
- [ ] セキュリティを損なう変更をしない


### 4. Done条件（チェック可能）

<!-- どうなったら完了とみなすか？具体的にチェック可能な条件を記載 -->
- [ ] diff-check.shを実行し、警告がない（または警告がある場合は必須アクションを実施した）
- [ ] Chrome拡張機能として再読み込みし、動作を確認した
- [ ] 各機能を手動でテストし、正常に動作することを確認した
- [ ] コンソールでエラーがないことを確認した
- [ ] 影響範囲を把握し、関連する機能が壊れていないことを確認した
- [ ] バージョン番号を更新した（manifest.json）
- [ ] CHANGELOG.mdに変更内容を記載した
- [ ] PRを作成し、Gate 1チェックリストを全てチェックした


---

## 使用例

### Contract: サジェスト機能の追加

#### 1. 目的（Why）
ユーザーが検索エンジンのサジェストを確認できるようにし、風評被害の可能性を早期に検知できるようにするため。

#### 2. やること（What）
- [ ] Google Suggest APIの呼び出し機能を実装
- [ ] Yahoo! Suggest APIの呼び出し機能を実装
- [ ] サジェスト結果をUIに表示する機能を実装
- [ ] ネガティブキーワードの検出機能を実装

#### 3. やってはいけないこと（NG）
- [ ] manifest.jsonの権限を追加しない（既存のhost_permissionsで対応可能）
- [ ] background.jsの既存のメッセージハンドリングを変更しない
- [ ] 既存のDNS診断機能を壊さない

#### 4. Done条件（チェック可能）
- [ ] diff-check.shを実行し、警告がない
- [ ] Chrome拡張機能として再読み込みし、サジェスト機能が動作することを確認
- [ ] Google/Yahoo!のサジェストが正しく取得できることを確認
- [ ] ネガティブキーワードが正しく検出されることを確認
- [ ] コンソールでエラーがないことを確認
- [ ] バージョン番号を更新した（8.0.2 → 8.0.3）
- [ ] CHANGELOG.mdに変更内容を記載した

---

## 使い方

1. 新しい機能を実装する前に、このテンプレートをコピーして`docs/contracts/[機能名].md`として保存
2. 4点セット（Why, What, NG, Done）を記載
3. AIに命令を渡す際、このcontractを参照させる
4. 実装中は定期的にDone条件を確認
5. 全てのDone条件を満たしたら完了
