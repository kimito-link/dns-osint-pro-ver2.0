# 📖 使用方法ガイド (USAGE.md)

DNS OSINT Pro ver2.0の詳細な使い方を説明します。

---

## 目次

1. [基本的な使い方](#基本的な使い方)
2. [各機能の詳細](#各機能の詳細)
3. [結果の見方](#結果の見方)
4. [トラブルシューティング](#トラブルシューティング)
5. [よくある質問](#よくある質問)

---

## 基本的な使い方

### 起動方法

#### 方法1: 拡張機能アイコンから起動
1. Chromeのツールバーにある拡張機能アイコン（パズルのピース）をクリック
2. 「DNS & WHOIS & Wayback – OSINT Helper」をクリック
3. ポップアップウィンドウが開きます

#### 方法2: 自動起動（推奨）
1. 調査したいWebサイトを開く
2. 拡張機能アイコンをクリック
3. **自動的に現在のドメインを分析**

#### 方法3: 右クリックメニューから
1. テキストやリンクを選択
2. 右クリック → 「OSINT: 選択テキストを照会」
3. 新しいタブで分析結果が表示

---

## 各機能の詳細

### 🎯 1. サイト健康診断

現在アクセスしているWebサイトの健康状態を診断します。

#### チェック項目

##### ✅ WordPress検出
- WordPressの使用有無を自動検出
- バージョン番号の確認
- 古いバージョンの場合は警告

**見方:**
```
✅ WordPress は最新版です (6.4.2)
❌ WordPressのバージョンが古いです (5.8.0)。セキュリティリスクがあります。
```

##### ✅ SEO分析

**タイトルタグ:**
- 文字数チェック（推奨: 30-60文字）
- 短すぎる/長すぎる場合は警告

**メタディスクリプション:**
- 文字数チェック（推奨: 120-160文字）
- 未設定の場合は警告

**Canonical URL:**
- 設定の有無を確認
- 重複コンテンツ対策

**OGPタグ:**
- og:title、og:image、og:descriptionの確認
- SNSシェア時の表示最適化

##### ✅ セキュリティ診断

**HTTPS:**
```
✅ HTTPSで保護されています
✅ HTTP→HTTPSリダイレクトが設定されています
❌ HTTPSが使用されていません。SSL証明書の導入を推奨します。
```

**WWW統一:**
```
✅ WWWリダイレクトが正しく設定されています (www無しに統一)
⚠️ www有り/無しが統一されていません。SEOに悪影響があります。
```

**セキュリティヘッダー:**
- X-Frame-Options
- X-Content-Type-Options
- X-XSS-Protection
- Strict-Transport-Security (HSTS)
- Content-Security-Policy

##### ✅ パフォーマンス

**キャッシュ設定:**
```
⚠️ キャッシュ設定がされていません。ページ読み込みが遅くなる可能性があります。
```

**圧縮設定:**
```
✅ 圧縮が有効です (gzip)
⚠️ 圧縮が有効化されていません。ページ読み込み速度が改善できます。
```

#### キャラクター案内の意味

| キャラクター | 色 | 意味 |
|------------|-----|------|
| 🎀 りんく | 緑 | 正常な設定、良好な点 |
| 🐕 こん太 | オレンジ | 改善できる点、推奨事項 |
| 🦝 たぬ姉 | 赤 | 深刻な問題、早急な対応が必要 |

---

### 🚨 2. サジェスト汚染チェック

検索エンジンのサジェスト機能から、風評被害の可能性を検出します。

#### 機能の流れ

1. **サイト名の自動抽出**
   - ページタイトルから会社名/サービス名を抽出
   - 法人格（株式会社など）を自動除去
   - セパレーター（｜、-など）で分割

2. **サジェスト取得**
   - Google、Yahoo!、Bingから同時取得
   - 各エンジンごとに最大10件表示

3. **ネガティブキーワード検出**
   - 25種類以上のキーワードを自動検出
   - 該当キーワードを赤字でハイライト

#### ネガティブキーワード一覧

```
詐欺、被害、危険、怪しい、最悪、ブラック、
やばい、トラブル、悪質、悪い、悪評、
炎上、問題、クレーム、苦情、評判悪い、
倒産、閉鎖、パワハラ、セクハラ、事件
```

#### 結果の見方

##### ✅ 正常な場合
```
🌐 Google サジェスト
1. 会社名 採用
2. 会社名 求人
3. 会社名 評判
...
```

##### 🚨 風評被害が検出された場合
```
⚠️ 風評被害の可能性が検出されました
ネガティブなサジェストが検出されています。
放置すると採用・売上に深刻な影響が出る可能性があります。

🌐 Google サジェスト
1. 会社名 詐欺    ← 赤字で表示
2. 会社名 被害    ← 赤字で表示
3. 会社名 やばい  ← 赤字で表示
```

#### 対策方法

風評被害が検出された場合、画面上部に「📱 無料でLINE相談する →」ボタンが表示されます。

**対策の流れ:**
1. LINE相談ボタンをクリック
2. 専門スタッフが無料診断
3. 対策方法の提案
4. 実施（有料サービス）

---

### 📧 3. メールセキュリティ診断

ドメインのメール送信セキュリティを診断します。

#### チェック項目

##### SPF（Sender Policy Framework）
- 送信元サーバーの認証
- TXTレコードに `v=spf1` があるかチェック

##### DKIM（DomainKeys Identified Mail）
- メール改ざん防止
- 一般的なセレクタ（default、google、k1等）を自動検索

##### DMARC（Domain-based Message Authentication）
- なりすまし対策
- `_dmarc.ドメイン名` のTXTレコードをチェック

#### 結果の見方

##### ✅ すべて正常な場合
```
✅ メールセキュリティ：良好
✅ SPF、DKIM、DMARCが正しく設定されています。
メールのセキュリティ対策は適切です！
```

##### 🚨 設定不備がある場合
```
⚠️ メールセキュリティの設定不備が検出されました

❌ SPFレコードが設定されていません
❌ DKIMレコードが検出されませんでした
❌ DMARCレコードが設定されていません

🚨 このままだと発生する問題：
・送信したメールが迷惑メールフォルダに振り分けられる
・なりすましメール（フィッシング）のリスクが高まる
・メール配信率が低下し、ビジネスに影響
・ドメインの信頼性が低下し、企業イメージに悪影響
```

---

### 🔎 4. DNS情報取得

DNSレコードを取得し、サーバー情報を確認します。

#### 取得するレコードタイプ

| レコード | 説明 | 用途 |
|---------|------|------|
| A | IPv4アドレス | Webサーバーのアドレス |
| AAAA | IPv6アドレス | Webサーバーの次世代アドレス |
| MX | メールサーバー | メール配信先 |
| NS | ネームサーバー | ドメイン管理サーバー |
| TXT | テキスト情報 | SPF、DKIM、DMARC等 |
| CNAME | エイリアス | ドメインの別名 |
| PTR | 逆引き | IPからホスト名 |

#### サーバー会社の自動識別

DNS情報から、使用しているサーバー会社を自動判定します。

**判定方法:**
1. IPアドレスの範囲から推定
2. 逆引きホスト名から推定
3. NSレコードから推定
4. MXレコードから推定
5. レジストラ情報から推定

**対応サーバー:**

**日本のホスティング:**
- 🟦 Xサーバー
- 🍭 ロリポップ
- 🌸 さくらインターネット
- 🏢 お名前ドットコム
- 🐄 ムームードメイン
- 🐾 ConoHa
- 🎨 カラフルボックス
- 🔥 mixhost
- 💼 heteml
- 🛠️ コアサーバー
- 🏛️ KAGOYA

**海外クラウド:**
- ☁️ Cloudflare
- 🟧 AWS
- 🔵 Google Cloud
- 🔷 Azure
- 🌊 DigitalOcean
- 🟫 Linode
- ⚡ Vultr

---

### 🔐 5. WHOIS / RDAP情報

ドメインとIPアドレスの登録情報を取得します。

#### ドメインRDAP

```
ドメイン: example.com
ステータス: 転送禁止、削除禁止
登録日: 2020年1月15日
有効期限: 2026年1月15日
🏢 レジストラ: お名前ドットコム
🔎 推定: 🏢 お名前ドットコム
```

#### IP RDAP

```
組織: Amazon.com, Inc.
国: US
IP範囲: 54.230.0.0 - 54.231.255.255
連絡先: Amazon EC2 Network Operations (ipam@amazon.com)
```

---

## 結果の見方

### 色による分類

| 色 | 意味 |
|-----|------|
| 🟢 緑 | 正常、良好 |
| 🟡 オレンジ | 改善推奨 |
| 🔴 赤 | 警告、早急な対応が必要 |
| 🔵 青 | 情報、参考 |

### アイコンの意味

| アイコン | 意味 |
|---------|------|
| ✅ | 正常に設定されている |
| ⚠️ | 改善が必要 |
| ❌ | 設定されていない/エラー |
| 🔎 | 推定情報 |
| 📊 | 統計情報 |
| 🚨 | 緊急警告 |

---

## トラブルシューティング

### よくあるエラーと対処法

#### 1. 「取得失敗（CORS/TLD制限の可能性）」

**原因:**
- ブラウザのセキュリティ制限（CORS）
- 対応していないTLD（.jpなど一部）

**対処法:**
- DNS情報は正常に取得できているため、問題ありません
- WHOIS情報のみ取得できない場合があります

#### 2. 「タイムアウト: サイトの応答が遅すぎます」

**原因:**
- サイトの応答が10秒以上かかっている
- サーバーが重い、またはダウンしている

**対処法:**
- しばらく待ってから再度試す
- サーバー管理者に連絡

#### 3. 「Yahoo! サジェスト: サジェストなし（CORS制限の可能性）」

**原因:**
- Yahoo! APIのCORS制限

**対処法:**
- Google、Bingのサジェストは正常に取得できます
- Yahoo!の情報が必要な場合は、直接Yahoo!検索で確認

#### 4. 拡張機能が表示されない

**対処法:**
1. `chrome://extensions/` を開く
2. 拡張機能が有効になっているか確認
3. 更新ボタン（🔄）をクリック
4. Chromeを再起動

---

## よくある質問

### Q1: この拡張機能は無料ですか？

**A:** はい、完全に無料で使用できます。ただし、風評被害対策の実施サポートは有料サービスとなります。

### Q2: プライバシーは保護されていますか？

**A:** はい。DNS over HTTPS (DoH)を使用しており、DNS通信は暗号化されています。

### Q3: どのブラウザで使えますか？

**A:** 現在はGoogle Chromeのみ対応しています。今後、EdgeやFirefoxにも対応予定です。

### Q4: 取得した情報は保存されますか？

**A:** 現在のバージョンでは、情報は保存されません。将来のバージョンで履歴機能を追加予定です。

### Q5: サーバー会社が正しく識別されません

**A:** すべてのサーバー会社に対応しているわけではありません。対応していないサーバーの場合、識別されないことがあります。

### Q6: サジェストが取得できません

**A:** 以下の原因が考えられます：
- ドメイン/サイト名が認知されていない（サジェストが存在しない）
- API側の制限（Yahoo!など）
- ネットワークの問題

### Q7: WordPress以外のCMSも検出できますか？

**A:** 現在はWordPressのみ対応しています。今後、他のCMS（Wix、Shopify等）にも対応予定です。

### Q8: 商用利用は可能ですか？

**A:** はい、MITライセンスの下で自由に使用できます。

---

## 次のステップ

- [開発者ガイド](DEVELOPMENT.md) - カスタマイズ方法
- [API仕様書](API.md) - 詳細な技術情報
- [リバースハック公式サイト](https://reverse-rebirth-hack.com) - サポート情報

---

## サポート

質問や問題がある場合は、以下からお問い合わせください：

### 🚨 風評被害・サジェスト対策
📱 [りんくが頼りにしているリバースハックに相談（風評対策）](https://lin.ee/X2aWSFO)

### 💻 サイト診断・ITインフラサポート
💻 [りんくが頼りにしているリバースハックに相談（ITインフラ）](https://lin.ee/lrjVHvH)

### その他
- 🐛 [GitHub Issues](https://github.com/yourusername/dns-osint-pro-ver2.0/issues)
- 📧 info@reverse-re-birth-hack.com

---

<p align="center">
  Made with ❤️ by Reverse Rebirth Hack Team
</p>
